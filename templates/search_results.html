{% extends "base.html" %}

{% block title %}Search Results - ZEECLOTHS{% endblock %}

{% block extra_css %}
<style>
/* Search Results Page Styles - Updated to match index page aesthetic */
html, body { 
  margin: 0; 
  height: 100%; 
  background: #000; 
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  overflow-x: hidden;
  scroll-behavior: smooth;
}

.search-results-page {
  position: relative;
  min-height: 100vh;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(20px);
  padding: 120px 0 80px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
}

.page-header {
  text-align: center;
  margin-bottom: 60px;
  animation: pageHeaderFadeIn 1s ease 0.3s both;
  opacity: 0;
}

.page-header h1 {
  font-size: clamp(2.5rem, 5vw, 3.5rem);
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 16px;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  background: linear-gradient(135deg, #ffffff, #e2e8f0);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.search-info {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 8px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.search-query {
  color: #22d3ee;
  font-weight: 600;
}

/* Search Filters */
.search-filters {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  padding: 24px;
  margin-bottom: 40px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  animation: filtersFadeIn 1s ease 0.6s both;
  opacity: 0;
}

.search-filters:hover {
  transform: translateY(-5px);
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
  background: rgba(255, 255, 255, 0.15);
}

.filters-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}

.filters-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.clear-filters {
  background: none;
  border: none;
  color: #22d3ee;
  cursor: pointer;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  transition: all 0.3s ease;
}

.clear-filters:hover {
  color: #ffffff;
  transform: translateY(-1px);
}

.filters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.filter-group {
  display: flex;
  flex-direction: column;
}

.filter-label {
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  margin-bottom: 8px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 12px;
}

.filter-select {
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  color: #ffffff;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.filter-select:focus {
  outline: none;
  border-color: #22d3ee;
  background: rgba(255, 255, 255, 0.15);
}

.filter-select option {
  background: #000;
  color: #ffffff;
  padding: 8px;
}

/* Results Grid */
.results-section {
  animation: resultsFadeIn 1s ease 0.9s both;
  opacity: 0;
}

.results-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 40px;
}

.results-count {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.8);
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.sort-controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.sort-label {
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 12px;
}

.sort-select {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  color: #ffffff;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.sort-select:focus {
  outline: none;
  border-color: #22d3ee;
  background: rgba(255, 255, 255, 0.15);
}

.sort-select option {
  background: #000;
  color: #ffffff;
  padding: 8px;
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 30px;
  margin-bottom: 60px;
}

.product-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
  animation: productCardFadeIn 1s ease 1.2s both;
  opacity: 0;
}

.product-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
  background: rgba(255, 255, 255, 0.15);
}

.product-image {
  width: 100%;
  height: 300px;
  overflow: hidden;
  position: relative;
}

.product-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.product-card:hover .product-image img {
  transform: scale(1.05);
}

.product-info {
  padding: 24px;
}

.product-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 8px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.product-category {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.product-price {
  font-size: 1.3rem;
  font-weight: 700;
  color: #22d3ee;
  margin-bottom: 16px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.product-actions {
  display: flex;
  gap: 12px;
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  border-radius: 0;
  text-decoration: none;
  font-weight: 500;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.btn:hover::before {
  left: 100%;
}

.btn-primary {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  color: #ffffff;
  backdrop-filter: blur(10px);
  flex: 1;
}

.btn-primary:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 15px 30px rgba(0,0,0,0.4);
  background: rgba(255,255,255,0.2);
  border-color: rgba(255,255,255,0.5);
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: #ffffff;
  backdrop-filter: blur(10px);
  padding: 12px;
}

.btn-secondary:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
}

/* No Results */
.no-results {
  text-align: center;
  padding: 80px 20px;
  animation: noResultsFadeIn 1s ease 0.6s both;
  opacity: 0;
}

.no-results-icon {
  width: 120px;
  height: 120px;
  margin: 0 auto 32px;
  opacity: 0.5;
}

.no-results h2 {
  font-size: 2rem;
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 16px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.no-results p {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 32px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.suggestions {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  padding: 24px;
  margin-top: 32px;
}

.suggestions h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 16px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.suggestions ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.suggestions li {
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 8px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.suggestions li:before {
  content: "•";
  color: #22d3ee;
  font-weight: bold;
  margin-right: 8px;
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-top: 60px;
  animation: paginationFadeIn 1s ease 1.5s both;
  opacity: 0;
}

.pagination-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  color: #ffffff;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.pagination-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-2px);
}

.pagination-btn.active {
  background: rgba(34, 211, 238, 0.2);
  border-color: #22d3ee;
  color: #22d3ee;
}

.pagination-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Animations */
@keyframes pageHeaderFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes filtersFadeIn {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes resultsFadeIn {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes productCardFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes noResultsFadeIn {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes paginationFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive Design */
@media (max-width: 1024px) {
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 24px;
  }
  
  .filters-grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }
}

@media (max-width: 768px) {
  .search-results-page {
    padding: 100px 0 60px;
  }
  
  .container {
    padding: 0 20px;
  }
  
  .page-header h1 {
    font-size: clamp(2rem, 4vw, 2.5rem);
  }
  
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
  }
  
  .filters-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .results-header {
    flex-direction: column;
    gap: 16px;
    align-items: flex-start;
  }
  
  .sort-controls {
    width: 100%;
    justify-content: space-between;
  }
}

@media (max-width: 480px) {
  .search-results-page {
    padding: 80px 0 40px;
  }
  
  .container {
    padding: 0 16px;
  }
  
  .products-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .search-filters {
    padding: 20px 16px;
  }
  
  .product-info {
    padding: 20px;
  }
  
  .product-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
  
  .page-header h1 {
    font-size: clamp(1.8rem, 3.5vw, 2.2rem);
  }
}
</style>
{% endblock %}

{% block content %}
<div class="search-results-page">
    <div class="container">
        <div class="page-header">
            <h1>Search Results</h1>
      <div class="search-info">
        Found <span class="results-count">{{ products|length }}</span> results for "<span class="search-query">{{ query }}</span>"
      </div>
    </div>
    
    {% if products %}
      <!-- Search Filters -->
      <div class="search-filters">
        <div class="filters-header">
          <h3 class="filters-title">Filters</h3>
          <button class="clear-filters" onclick="clearFilters()">Clear All</button>
        </div>
        <div class="filters-grid">
          <div class="filter-group">
            <label class="filter-label">Category</label>
            <select class="filter-select" id="categoryFilter">
              <option value="">All Categories</option>
              <option value="shirts">Shirts</option>
              <option value="pants">Pants</option>
              <option value="hoodies">Hoodies</option>
              <option value="t-shirts">T-Shirts</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Price Range</label>
            <select class="filter-select" id="priceFilter">
              <option value="">All Prices</option>
              <option value="0-500">Under ₹500</option>
              <option value="500-1000">₹500 - ₹1000</option>
              <option value="1000-2000">₹1000 - ₹2000</option>
              <option value="2000+">Above ₹2000</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Sort By</label>
            <select class="filter-select" id="sortFilter">
              <option value="relevance">Relevance</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="name">Name: A to Z</option>
              <option value="newest">Newest First</option>
            </select>
          </div>
        </div>
        </div>

      <!-- Results Section -->
      <div class="results-section">
        <div class="results-header">
          <div class="results-count">
            Showing {{ products|length }} of {{ total_results }} results
          </div>
          <div class="sort-controls">
            <span class="sort-label">Sort:</span>
            <select class="sort-select" id="sortSelect">
              <option value="relevance">Relevance</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="name">Name: A to Z</option>
              <option value="newest">Newest First</option>
            </select>
          </div>
            </div>
            
            <div class="products-grid">
          {% for product in products %}
            <div class="product-card" onclick="window.location.href='{{ url_for('shop.product_detail', product_id=product.id) }}'">
                    <div class="product-image">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}">
                        </div>
              <div class="product-info">
                        <h3 class="product-title">{{ product.name }}</h3>
                <div class="product-category">{{ product.category }}</div>
                <div class="product-price">₹{{ "%.2f"|format(product.price) }}</div>
                <div class="product-actions">
                  <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart({{ product.id }})">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                            Add to Cart
                        </button>
                  <button class="btn btn-secondary" onclick="event.stopPropagation(); addToWishlist({{ product.id }})">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20.84 4.61C20.3292 4.099 19.7228 3.69364 19.0554 3.41708C18.3879 3.14052 17.6725 2.99817 16.95 2.99817C16.2275 2.99817 15.5121 3.14052 14.8446 3.41708C14.1772 3.69364 13.5708 4.099 13.06 4.61L12 5.67L10.94 4.61C9.9083 3.5783 8.50903 2.9987 7.05 2.9987C5.59096 2.9987 4.19169 3.5783 3.16 4.61C2.1283 5.6417 1.5487 7.04097 1.5487 8.5C1.5487 9.95903 2.1283 11.3583 3.16 12.39L12 21.23L20.84 12.39C21.351 11.8792 21.7564 11.2728 22.0329 10.6054C22.3095 9.93789 22.4518 9.22249 22.4518 8.5C22.4518 7.77751 22.3095 7.0621 22.0329 6.39464C21.7564 5.72718 21.351 5.12075 20.84 4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
        {% if pagination.pages > 1 %}
            <div class="pagination">
            {% if pagination.has_prev %}
              <a href="{{ url_for('shop.search', q=query, page=pagination.prev_num) }}" class="pagination-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                </a>
                {% endif %}
                
            {% for page_num in pagination.iter_pages() %}
                        {% if page_num %}
                {% if page_num != pagination.page %}
                  <a href="{{ url_for('shop.search', q=query, page=page_num) }}" class="pagination-btn">{{ page_num }}</a>
                            {% else %}
                  <span class="pagination-btn active">{{ page_num }}</span>
                            {% endif %}
                        {% else %}
                <span class="pagination-btn">...</span>
                        {% endif %}
                    {% endfor %}
            
            {% if pagination.has_next %}
              <a href="{{ url_for('shop.search', q=query, page=pagination.next_num) }}" class="pagination-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% else %}
      <!-- No Results -->
        <div class="no-results">
        <div class="no-results-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2>No Results Found</h2>
        <p>We couldn't find any products matching "<span class="search-query">{{ query }}</span>"</p>
        
        <div class="suggestions">
          <h3>Try these suggestions:</h3>
          <ul>
            <li>Check your spelling</li>
            <li>Try more general keywords</li>
            <li>Use fewer keywords</li>
            <li>Browse our categories</li>
          </ul>
                </div>
        
        <div style="margin-top: 32px;">
          <a href="{{ url_for('shop.shop') }}" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Browse All Products
          </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Search results page functionality
document.addEventListener('DOMContentLoaded', function() {
  // Initialize filters
  initializeFilters();
  
  // Add event listeners for filter changes
  document.getElementById('categoryFilter').addEventListener('change', applyFilters);
  document.getElementById('priceFilter').addEventListener('change', applyFilters);
  document.getElementById('sortFilter').addEventListener('change', applyFilters);
  document.getElementById('sortSelect').addEventListener('change', applySorting);
});

function initializeFilters() {
  // Set initial values based on URL parameters
  const urlParams = new URLSearchParams(window.location.search);
  
  if (urlParams.get('category')) {
    document.getElementById('categoryFilter').value = urlParams.get('category');
  }
  if (urlParams.get('price')) {
    document.getElementById('priceFilter').value = urlParams.get('price');
  }
  if (urlParams.get('sort')) {
    document.getElementById('sortFilter').value = urlParams.get('sort');
    document.getElementById('sortSelect').value = urlParams.get('sort');
  }
}

function applyFilters() {
  const category = document.getElementById('categoryFilter').value;
  const price = document.getElementById('priceFilter').value;
  const sort = document.getElementById('sortFilter').value;
  
  // Build new URL with filters
  const url = new URL(window.location);
  if (category) url.searchParams.set('category', category);
  else url.searchParams.delete('category');
  
  if (price) url.searchParams.set('price', price);
  else url.searchParams.delete('price');
  
  if (sort) url.searchParams.set('sort', sort);
  else url.searchParams.delete('sort');
  
  // Reset to first page
  url.searchParams.delete('page');
  
  window.location.href = url.toString();
}

function applySorting() {
  const sort = document.getElementById('sortSelect').value;
  
  // Update both sort controls
  document.getElementById('sortFilter').value = sort;
  
  // Apply the filter
  applyFilters();
}

function clearFilters() {
  // Clear all filter values
  document.getElementById('categoryFilter').value = '';
  document.getElementById('priceFilter').value = '';
  document.getElementById('sortFilter').value = 'relevance';
  document.getElementById('sortSelect').value = 'relevance';
  
  // Remove all filter parameters from URL
  const url = new URL(window.location);
  url.searchParams.delete('category');
  url.searchParams.delete('price');
  url.searchParams.delete('sort');
  url.searchParams.delete('page');
  
  window.location.href = url.toString();
}

function addToCart(productId) {
  const productData = {
    product_id: productId,
    quantity: 1
  };
        
        fetch('/add_to_cart', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
    body: JSON.stringify(productData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
      showNotification('Product added to cart!', 'success');
                // Update cart count
      const cartCount = document.querySelector('.cart-badge');
      if (cartCount) {
                const currentCount = parseInt(cartCount.textContent) || 0;
                cartCount.textContent = currentCount + 1;
      }
            } else {
                showNotification(data.message, 'error');
            }
        })
        .catch(error => {
            showNotification('Error adding product to cart', 'error');
        });
}

function addToWishlist(productId) {
  showNotification('Added to wishlist!', 'success');
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 24px;
    border-radius: 0;
    color: white;
    font-weight: 500;
    font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    z-index: 1000;
    ${type === 'success' ? 'background: rgba(16, 185, 129, 0.9);' : 'background: rgba(239, 68, 68, 0.9);'}
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    transform: translateX(100%);
    transition: transform 0.3s ease;
  `;
    
    document.body.appendChild(notification);
    
  // Animate in
  setTimeout(() => {
    notification.style.transform = 'translateX(0)';
  }, 100);
  
  // Remove after 3 seconds
  setTimeout(() => {
    notification.style.transform = 'translateX(100%)';
    setTimeout(() => {
        notification.remove();
    }, 300);
    }, 3000);
}
</script>
{% endblock %}



