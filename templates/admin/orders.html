{% extends "base.html" %}

{% block title %}Manage Orders - ZEECLOTHS{% endblock %}

{% block extra_css %}
<style>
/* Admin Orders Page Styles - Updated to match index page aesthetic */
html, body {
  margin: 0;
  height: 100%;
  background: #000;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  overflow-x: hidden;
  scroll-behavior: smooth;
}

/* Admin Navbar - White text override */
.navbar .brand {
  color: #ffffff !important;
}

.navbar .nav-list a {
  color: #ffffff !important;
}

.navbar .nav-list a:hover {
  color: #22d3ee !important;
}

.navbar .nav-list a.active {
  color: #22d3ee !important;
}

.navbar .profile-icon {
  color: #ffffff !important;
}

.navbar .profile-icon:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .cart-icon {
  color: #ffffff !important;
}

.navbar .cart-icon:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .welcome-text {
  color: #ffffff !important;
}

.navbar .dropdown-item {
  color: #ffffff !important;
}

.navbar .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .search-input {
  color: #ffffff !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.navbar .search-input::placeholder {
  color: rgba(255, 255, 255, 0.6) !important;
}

.navbar .search-input:focus {
  background: rgba(255, 255, 255, 0.15) !important;
  border-color: #22d3ee !important;
}

.admin-orders-page {
  position: relative;
  min-height: 100vh;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(20px);
  padding: 120px 0 80px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.page-header {
  text-align: center;
  margin-bottom: 3rem;
}

.page-header h1 {
  font-size: 3rem;
  font-weight: 700;
  background: linear-gradient(135deg, #fff 0%, #a8a8a8 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
  animation: fadeInUp 0.8s ease-out;
}

.orders-table {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  animation: fadeInUp 0.8s ease-out 0.1s both;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 1.5rem;
  text-align: left;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

th {
  background: rgba(255, 255, 255, 0.05);
  font-weight: 600;
  color: #fff;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

td {
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.95rem;
}

tr:hover {
  background: rgba(255, 255, 255, 0.05);
  transition: background 0.3s ease;
}

.status-badge {
  padding: 0.5rem 1rem;
  border-radius: 0;
  font-size: 0.85rem;
  font-weight: 600;
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
}

.status-pending { 
  background: rgba(255, 193, 7, 0.1); 
  color: #ffc107; 
  border-color: rgba(255, 193, 7, 0.3);
}
.status-processing { 
  background: rgba(13, 110, 253, 0.1); 
  color: #0d6efd; 
  border-color: rgba(13, 110, 253, 0.3);
}
.status-shipped { 
  background: rgba(25, 135, 84, 0.1); 
  color: #198754; 
  border-color: rgba(25, 135, 84, 0.3);
}
.status-delivered { 
  background: rgba(25, 135, 84, 0.15); 
  color: #20c997; 
  border-color: rgba(25, 135, 84, 0.4);
}
.status-cancelled { 
  background: rgba(220, 53, 69, 0.1); 
  color: #dc3545; 
  border-color: rgba(220, 53, 69, 0.3);
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 0;
  font-size: 0.9rem;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.btn-small {
  padding: 0.5rem 1rem;
  font-size: 0.85rem;
}

.btn-outline {
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
}

.btn-outline:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
}

.btn svg {
  width: 14px;
  height: 14px;
}

.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  animation: fadeInUp 0.8s ease-out 0.1s both;
}

.empty-state svg {
  width: 64px;
  height: 64px;
  color: rgba(255, 255, 255, 0.3);
  margin-bottom: 1.5rem;
}

.empty-state h3 {
  color: #fff;
  margin-bottom: 0.75rem;
  font-size: 1.5rem;
  font-weight: 600;
}

.empty-state p {
  color: rgba(255, 255, 255, 0.7);
  font-size: 1rem;
  line-height: 1.5;
}

.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.5rem;
  margin-top: 3rem;
  animation: fadeInUp 0.8s ease-out 0.2s both;
}

.page-info {
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
  font-size: 0.95rem;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 768px) {
  .page-header h1 {
    font-size: 2.5rem;
  }
  
  .orders-table {
    overflow-x: auto;
  }
  
  th, td {
    padding: 1rem;
    font-size: 0.85rem;
  }
  
  .pagination {
    flex-direction: column;
    gap: 1rem;
  }
  
  .empty-state {
    padding: 3rem 1.5rem;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="admin-orders-page">
  <div class="container">
    <div class="page-header">
      <h1>Manage Orders</h1>
    </div>

    {% if orders.items %}
    <div class="orders-table">
      <table>
        <thead>
          <tr>
            <th>Order #</th>
            <th>Customer</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders.items %}
          <tr>
            <td>{{ order.order_number }}</td>
            <td>{{ order.user.first_name }} {{ order.user.last_name }}</td>
            <td>{{ order.created_at.strftime('%Y-%m-%d') }}</td>
            <td>â‚¹{{ "%.0f"|format(order.total_amount) }}</td>
            <td>
              <span class="status-badge status-{{ order.status }}">{{ order.status.title() }}</span>
            </td>
            <td>
              <a href="{{ url_for('admin.order_detail', order_id=order.id) }}" class="btn btn-small btn-outline">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                View
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if orders.pages > 1 %}
    <div class="pagination">
      {% if orders.has_prev %}
      <a href="{{ url_for('admin.orders', page=orders.prev_num) }}" class="btn btn-outline">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Previous
      </a>
      {% endif %}
      
      <span class="page-info">Page {{ orders.page }} of {{ orders.pages }}</span>
      
      {% if orders.has_next %}
      <a href="{{ url_for('admin.orders', page=orders.next_num) }}" class="btn btn-outline">
        Next
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      {% endif %}
    </div>
    {% endif %}
    {% else %}
    <div class="empty-state">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h3>No Orders Found</h3>
      <p>Orders will appear here once customers start placing them.</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Admin orders page functionality
document.addEventListener('DOMContentLoaded', function() {
  // Add hover effects to table rows
  const tableRows = document.querySelectorAll('tbody tr');
  tableRows.forEach(row => {
    row.addEventListener('mouseenter', function() {
      this.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';
    });
    row.addEventListener('mouseleave', function() {
      this.style.backgroundColor = 'transparent';
    });
  });

  // Add hover effects to status badges
  const statusBadges = document.querySelectorAll('.status-badge');
  statusBadges.forEach(badge => {
    badge.addEventListener('mouseenter', function() {
      this.style.transform = 'scale(1.05)';
    });
    badge.addEventListener('mouseleave', function() {
      this.style.transform = 'scale(1)';
    });
  });

  // Add click effects to action buttons
  const actionButtons = document.querySelectorAll('.btn');
  actionButtons.forEach(button => {
    button.addEventListener('click', function() {
      this.style.transform = 'translateY(-2px) scale(0.98)';
      setTimeout(() => {
        this.style.transform = 'translateY(-2px) scale(1)';
      }, 150);
    });
  });

  // Add click effects to pagination buttons
  const paginationButtons = document.querySelectorAll('.pagination .btn');
  paginationButtons.forEach(button => {
    button.addEventListener('click', function() {
      this.style.transform = 'translateY(-2px) scale(0.98)';
      setTimeout(() => {
        this.style.transform = 'translateY(-2px) scale(1)';
      }, 150);
    });
  });

  // Auto-refresh orders data every 30 seconds
  setInterval(() => {
    console.log('Refreshing orders data...');
    // Here you would typically make an AJAX call to refresh the data
  }, 30000);
});
</script>
{% endblock %}


