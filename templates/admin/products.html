{% extends "base.html" %}

{% block title %}Manage Products - ZEECLOTHS{% endblock %}

{% block extra_css %}
<style>
/* Admin Products Page Styles - Updated to match index page aesthetic */
html, body { 
  margin: 0; 
  height: 100%; 
  background: #000; 
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  overflow-x: hidden;
  scroll-behavior: smooth;
}

/* Admin Navbar - White text override */
.navbar .brand {
  color: #ffffff !important;
}

.navbar .nav-list a {
  color: #ffffff !important;
}

.navbar .nav-list a:hover {
  color: #22d3ee !important;
}

.navbar .nav-list a.active {
  color: #22d3ee !important;
}

.navbar .profile-icon {
  color: #ffffff !important;
}

.navbar .profile-icon:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .cart-icon {
  color: #ffffff !important;
}

.navbar .cart-icon:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .welcome-text {
  color: #ffffff !important;
}

.navbar .dropdown-item {
  color: #ffffff !important;
}

.navbar .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #22d3ee !important;
}

.navbar .search-input {
  color: #ffffff !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.navbar .search-input::placeholder {
  color: rgba(255, 255, 255, 0.6) !important;
}

.navbar .search-input:focus {
  background: rgba(255, 255, 255, 0.15) !important;
  border-color: #22d3ee !important;
}

.admin-products-page {
  position: relative;
  min-height: 100vh;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(20px);
  padding: 120px 0 80px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 40px;
}

.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 60px;
  animation: pageHeaderFadeIn 1s ease 0.3s both;
  opacity: 0;
}

.page-header h1 {
  font-size: clamp(2.5rem, 5vw, 3.5rem);
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 16px;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  background: linear-gradient(135deg, #ffffff, #e2e8f0);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.add-product-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 16px 32px;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 0;
  color: #ffffff;
  text-decoration: none;
  font-weight: 500;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.add-product-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
  background: rgba(255,255,255,0.2);
  border-color: rgba(255,255,255,0.5);
}

/* Filters and Search */
.filters-section {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  padding: 24px;
  margin-bottom: 40px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  animation: filtersFadeIn 1s ease 0.6s both;
  opacity: 0;
}

.filters-section:hover {
  transform: translateY(-5px);
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
  background: rgba(255, 255, 255, 0.15);
}

.filters-grid {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr auto;
  gap: 20px;
  align-items: end;
}

.filter-group {
  display: flex;
  flex-direction: column;
}

.filter-label {
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  margin-bottom: 8px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 12px;
}

.filter-input,
.filter-select {
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  color: #ffffff;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.filter-input:focus,
.filter-select:focus {
  outline: none;
  border-color: #22d3ee;
  background: rgba(255, 255, 255, 0.15);
}

.filter-input::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

.filter-select option {
  background: #000;
  color: #ffffff;
  padding: 8px;
}

.filter-btn {
  padding: 12px 24px;
  background: rgba(34, 211, 238, 0.2);
  border: 1px solid #22d3ee;
  border-radius: 0;
  color: #22d3ee;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  backdrop-filter: blur(10px);
}

.filter-btn:hover {
  background: rgba(34, 211, 238, 0.3);
  transform: translateY(-2px);
}

/* Products Table */
.products-table {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  animation: tableFadeIn 1s ease 0.9s both;
  opacity: 0;
}

.products-table:hover {
  transform: translateY(-5px);
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
  background: rgba(255, 255, 255, 0.15);
}

.table-header {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}

.table-header th {
  padding: 20px 16px;
  text-align: left;
  color: #ffffff;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 14px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.table-body tr {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.table-body tr:hover {
  background: rgba(255, 255, 255, 0.05);
}

.table-body tr:last-child {
  border-bottom: none;
}

.table-body td {
  padding: 20px 16px;
  color: rgba(255, 255, 255, 0.9);
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.product-image {
  width: 60px;
  height: 60px;
  border-radius: 0;
  object-fit: cover;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.product-name {
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 4px;
}

.product-category {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.product-price {
  font-weight: 700;
  color: #22d3ee;
  font-size: 1.1rem;
}

.product-stock {
  font-weight: 600;
}

.stock-high {
  color: #10b981;
}

.stock-medium {
  color: #f59e0b;
}

.stock-low {
  color: #ef4444;
}

.status-badge {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 0;
  font-size: 0.8rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.status-active {
  background: rgba(16, 185, 129, 0.2);
  border: 1px solid #10b981;
  color: #10b981;
}

.status-inactive {
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid #ef4444;
  color: #ef4444;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 8px;
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  border-radius: 0;
  text-decoration: none;
  font-weight: 500;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  backdrop-filter: blur(10px);
}

.btn-edit {
  background: rgba(34, 211, 238, 0.2);
  border: 1px solid #22d3ee;
  color: #22d3ee;
}

.btn-edit:hover {
  background: rgba(34, 211, 238, 0.3);
  transform: translateY(-2px);
}

.btn-delete {
  background: rgba(239, 68, 68, 0.2);
  border: 1px solid #ef4444;
  color: #ef4444;
}

.btn-delete:hover {
  background: rgba(239, 68, 68, 0.3);
  transform: translateY(-2px);
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-top: 40px;
  animation: paginationFadeIn 1s ease 1.2s both;
  opacity: 0;
}

.pagination-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 0;
  color: #ffffff;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.pagination-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-2px);
}

.pagination-btn.active {
  background: rgba(34, 211, 238, 0.2);
  border-color: #22d3ee;
  color: #22d3ee;
}

.pagination-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 80px 20px;
  animation: emptyStateFadeIn 1s ease 0.6s both;
  opacity: 0;
}

.empty-state-icon {
  width: 120px;
  height: 120px;
  margin: 0 auto 32px;
  opacity: 0.5;
}

.empty-state h2 {
  font-size: 2rem;
  font-weight: 600;
  color: #ffffff;
  margin-bottom: 16px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.empty-state p {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 32px;
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Animations */
@keyframes pageHeaderFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes filtersFadeIn {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes tableFadeIn {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes paginationFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes emptyStateFadeIn {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive Design */
@media (max-width: 1200px) {
  .filters-grid {
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
}

@media (max-width: 768px) {
  .admin-products-page {
    padding: 100px 0 60px;
  }
  
  .container {
    padding: 0 20px;
  }
  
  .page-header {
    flex-direction: column;
    gap: 20px;
    align-items: flex-start;
  }
  
  .page-header h1 {
    font-size: clamp(2rem, 4vw, 2.5rem);
  }
  
  .filters-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .products-table {
    overflow-x: auto;
  }
  
  .table-header th,
  .table-body td {
    padding: 16px 12px;
    font-size: 0.9rem;
  }
  
  .action-buttons {
    flex-direction: column;
    gap: 4px;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .admin-products-page {
    padding: 80px 0 40px;
  }
  
  .container {
    padding: 0 16px;
  }
  
  .page-header h1 {
    font-size: clamp(1.8rem, 3.5vw, 2.2rem);
  }
  
  .add-product-btn {
    width: 100%;
    justify-content: center;
  }
  
  .filters-section {
    padding: 20px 16px;
  }
  
  .table-header th,
  .table-body td {
    padding: 12px 8px;
    font-size: 0.8rem;
  }
  
  .product-image {
    width: 40px;
    height: 40px;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="admin-products-page">
  <div class="container">
    <div class="page-header">
        <h1>Manage Products</h1>
      <a href="{{ url_for('admin.add_product') }}" class="add-product-btn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Add Product
        </a>
    </div>

    {% if products.items %}
      <!-- Filters Section -->
      <div class="filters-section">
        <div class="filters-grid">
          <div class="filter-group">
            <label class="filter-label">Search Products</label>
            <input type="text" class="filter-input" id="searchInput" placeholder="Search by name, category...">
          </div>
          <div class="filter-group">
            <label class="filter-label">Category</label>
            <select class="filter-select" id="categoryFilter">
              <option value="">All Categories</option>
              <option value="shirts">Shirts</option>
              <option value="pants">Pants</option>
              <option value="hoodies">Hoodies</option>
              <option value="t-shirts">T-Shirts</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Status</label>
            <select class="filter-select" id="statusFilter">
              <option value="">All Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Stock</label>
            <select class="filter-select" id="stockFilter">
              <option value="">All Stock</option>
              <option value="high">High (>50)</option>
              <option value="medium">Medium (10-50)</option>
              <option value="low">Low (<10)</option>
            </select>
          </div>
          <div class="filter-group">
            <button class="filter-btn" onclick="applyFilters()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Filter
            </button>
          </div>
        </div>
      </div>
      
      <!-- Products Table -->
    <div class="products-table">
        <table style="width: 100%; border-collapse: collapse;">
          <thead class="table-header">
                <tr>
                    <th>Image</th>
              <th>Product</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Stock</th>
              <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
          <tbody class="table-body">
                {% for product in products.items %}
                <tr>
                    <td>
                  <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image">
                    </td>
                    <td>
                  <div class="product-name">{{ product.name }}</div>
                  <div class="product-category">{{ product.category.name if product.category else 'No Category' }}</div>
                </td>
                <td>{{ product.category.name if product.category else 'No Category' }}</td>
                <td class="product-price">â‚¹{{ "%.2f"|format(product.price) }}</td>
                <td class="product-stock {% if product.stock > 50 %}stock-high{% elif product.stock > 10 %}stock-medium{% else %}stock-low{% endif %}">
                  {{ product.stock }}
                    </td>
                    <td>
                  <span class="status-badge {% if product.stock > 0 %}status-active{% else %}status-inactive{% endif %}">
                    {% if product.stock > 0 %}In Stock{% else %}Out of Stock{% endif %}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                    <a href="{{ url_for('admin.edit_product', product_id=product.id) }}" class="btn btn-edit">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      Edit
                    </a>
                    <button class="btn btn-delete" onclick="deleteProduct({{ product.id }})">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      Delete
                                </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

      <!-- Pagination -->
    {% if products.pages > 1 %}
    <div class="pagination">
        {% if products.has_prev %}
            <a href="{{ url_for('admin.products', page=products.prev_num) }}" class="pagination-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
        {% endif %}
        
          {% for page_num in products.iter_pages() %}
            {% if page_num %}
              {% if page_num != products.page %}
                <a href="{{ url_for('admin.products', page=page_num) }}" class="pagination-btn">{{ page_num }}</a>
              {% else %}
                <span class="pagination-btn active">{{ page_num }}</span>
              {% endif %}
            {% else %}
              <span class="pagination-btn">...</span>
            {% endif %}
          {% endfor %}
        
        {% if products.has_next %}
            <a href="{{ url_for('admin.products', page=products.next_num) }}" class="pagination-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
        {% endif %}
    </div>
    {% endif %}
    {% else %}
      <!-- Empty State -->
    <div class="empty-state">
        <div class="empty-state-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 7L10 17L5 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2>No Products Found</h2>
        <p>Get started by adding your first product to the catalog.</p>
        <a href="{{ url_for('admin.add_product') }}" class="add-product-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Add Your First Product
        </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Admin products page functionality
document.addEventListener('DOMContentLoaded', function() {
  // Search functionality
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      // Here you would implement real-time search
      console.log('Searching for:', this.value);
    });
  }
  
  // Filter functionality
  const categoryFilter = document.getElementById('categoryFilter');
  const statusFilter = document.getElementById('statusFilter');
  const stockFilter = document.getElementById('stockFilter');
  
  if (categoryFilter) {
    categoryFilter.addEventListener('change', applyFilters);
  }
  if (statusFilter) {
    statusFilter.addEventListener('change', applyFilters);
  }
  if (stockFilter) {
    stockFilter.addEventListener('change', applyFilters);
  }
});

function applyFilters() {
  const search = document.getElementById('searchInput').value;
  const category = document.getElementById('categoryFilter').value;
  const status = document.getElementById('statusFilter').value;
  const stock = document.getElementById('stockFilter').value;
  
  // Build query parameters
  const params = new URLSearchParams();
  if (search) params.append('search', search);
  if (category) params.append('category', category);
  if (status) params.append('status', status);
  if (stock) params.append('stock', stock);
  
  // Redirect with filters
  const url = new URL(window.location);
  url.search = params.toString();
  window.location.href = url.toString();
}

function deleteProduct(productId) {
  if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
    fetch(`/admin/products/${productId}/delete`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        showNotification('Product deleted successfully!', 'success');
        // Reload the page to update the table
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      } else {
        showNotification(data.message || 'Error deleting product', 'error');
      }
    })
    .catch(error => {
      showNotification('Error deleting product', 'error');
    });
  }
}

function showNotification(message, type) {
  const notification = document.createElement('div');
  notification.className = `notification notification-${type}`;
  notification.textContent = message;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 24px;
    border-radius: 0;
    color: white;
    font-weight: 500;
    font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    z-index: 1000;
    ${type === 'success' ? 'background: rgba(16, 185, 129, 0.9);' : 'background: rgba(239, 68, 68, 0.9);'}
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    transform: translateX(100%);
    transition: transform 0.3s ease;
  `;
  
  document.body.appendChild(notification);
  
  // Animate in
  setTimeout(() => {
    notification.style.transform = 'translateX(0)';
  }, 100);
  
  // Remove after 3 seconds
  setTimeout(() => {
    notification.style.transform = 'translateX(100%)';
    setTimeout(() => {
      notification.remove();
    }, 300);
  }, 3000);
}
</script>
{% endblock %}


